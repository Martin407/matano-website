"use strict";(self.webpackChunk_matano_website=self.webpackChunk_matano_website||[]).push([[3401],{3905:(e,t,n)=>{n.d(t,{Zo:()=>m,kt:()=>u});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},m=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),p=c(n),u=r,h=p["".concat(s,".").concat(u)]||p[u]||d[u]||i;return n?a.createElement(h,o(o({ref:t},m),{},{components:n})):a.createElement(h,o({ref:t},m))}));function u(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=p;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var c=2;c<i;c++)o[c]=n[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},6753:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>l,toc:()=>c});var a=n(7462),r=(n(7294),n(3905));const i={title:"Enrichment tables overview",sidebar_label:"Overview",sidebar_position:1},o=void 0,l={unversionedId:"enrichment/overview",id:"enrichment/overview",title:"Enrichment tables overview",description:"You can use enrichment tables to enrich your data and alerts inside Matano. Enrichment tables let you incorporate external, custom data sources and threat intelligence data into your data, detections, and alerting. For example, you can use an enrichment table of user account data to map the user ID in log data to an entry in the enrichment table, and retrieve other attributes of that user. You can also use enrichment tables to ingest and use threat intelligence data, including Indicators of Compromise (IoCs), from external feeds and sources.",source:"@site/docs/enrichment/overview.md",sourceDirName:"enrichment",slug:"/enrichment/overview",permalink:"/docs/enrichment/overview",draft:!1,editUrl:"https://github.com/matanolabs/matano-website/tree/main/website/docs/enrichment/overview.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Enrichment tables overview",sidebar_label:"Overview",sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Delivering alerts to external systems",permalink:"/docs/detections/alerting/delivering-alerts"},next:{title:"Working with enrichment tables",permalink:"/docs/enrichment/working-with-enrichment-tables"}},s={},c=[{value:"Types of enrichment tables",id:"types-of-enrichment-tables",level:2},{value:"Static enrichment tables",id:"static-enrichment-tables",level:3},{value:"Dynamic enrichment tables",id:"dynamic-enrichment-tables",level:3},{value:"Dynamic enrichment table write mode",id:"dynamic-enrichment-table-write-mode",level:3},{value:"Append write mode",id:"append-write-mode",level:4},{value:"Overwrite write mode",id:"overwrite-write-mode",level:4},{value:"Merge write mode",id:"merge-write-mode",level:4}],m={toc:c};function d(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"You can use ",(0,r.kt)("em",{parentName:"p"},"enrichment tables")," to enrich your data and alerts inside Matano. Enrichment tables let you incorporate external, custom data sources and threat intelligence data into your data, detections, and alerting. For example, you can use an enrichment table of user account data to map the user ID in log data to an entry in the enrichment table, and retrieve other attributes of that user. You can also use enrichment tables to ingest and use threat intelligence data, including Indicators of Compromise (IoCs), from external feeds and sources."),(0,r.kt)("p",null,"In Matano, all enrichment tables are Apache Iceberg tables."),(0,r.kt)("h2",{id:"types-of-enrichment-tables"},"Types of enrichment tables"),(0,r.kt)("p",null,"Matano supports two types of enrichment tables: ",(0,r.kt)("em",{parentName:"p"},"static")," and ",(0,r.kt)("em",{parentName:"p"},"dynamic"),"."),(0,r.kt)("h3",{id:"static-enrichment-tables"},"Static enrichment tables"),(0,r.kt)("p",null,"Static enrichment tables are tables for which the table data is statically defined inline as part of the Matano directory. You include a data file in your Matano directory that contains the contents of the enrichment table. Each time you deploy Matano, if the data is changed, your table is overwritten with the current data."),(0,r.kt)("p",null,"Use static enrichment tables for quick or simple tables you want to inline in your Matano directory and track in Git, without having to upload data for ingestion."),(0,r.kt)("h3",{id:"dynamic-enrichment-tables"},"Dynamic enrichment tables"),(0,r.kt)("p",null,"Dynamic enrichment tables are tables for which the table data is uploaded dynamically to be ingested into the table. You decide when and how to upload data to be ingested into the enrichment table."),(0,r.kt)("h3",{id:"dynamic-enrichment-table-write-mode"},"Dynamic enrichment table write mode"),(0,r.kt)("p",null,"For dynamic enrichment tables, you can specify a ",(0,r.kt)("em",{parentName:"p"},"write mode")," in your configuration to instruct Matano how to handle new data written to an enrichment table for ingestion. Matano supports ",(0,r.kt)("strong",{parentName:"p"},"append"),",  ",(0,r.kt)("strong",{parentName:"p"},"overwrite"),", and ",(0,r.kt)("strong",{parentName:"p"},"merge")," write modes."),(0,r.kt)("h4",{id:"append-write-mode"},"Append write mode"),(0,r.kt)("p",null,"When you write data files for ingestion to an enrichment table that has write mode ",(0,r.kt)("em",{parentName:"p"},"append"),", the written rows will be appended to the table, and the existing data will remain unchanged."),(0,r.kt)("h4",{id:"overwrite-write-mode"},"Overwrite write mode"),(0,r.kt)("p",null,"When you write data files for ingestion to an enrichment table that has write mode ",(0,r.kt)("em",{parentName:"p"},"overwrite"),", the written rows will become the new content of the table, and the existing data will be overwritten."),(0,r.kt)("h4",{id:"merge-write-mode"},"Merge write mode"),(0,r.kt)("p",null,"When you write data files for ingestion to an enrichment table that has write mode ",(0,r.kt)("em",{parentName:"p"},"merge"),", you specify a primary key, and rows are either inserted or replaced based on the primary key value. You can use this, for example, to deduplicate data that is being ingested based on a primary key."),(0,r.kt)("p",null,"To use the merge write mode, specify the ",(0,r.kt)("inlineCode",{parentName:"p"},"write_mode")," key in your ",(0,r.kt)("inlineCode",{parentName:"p"},"enrichment.yml")," as ",(0,r.kt)("inlineCode",{parentName:"p"},"merge")," and set the ",(0,r.kt)("inlineCode",{parentName:"p"},"schema.primary_key")," property to the name of the column that you wish to use as the primary key (you can use dotted syntax for nested columns). For example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yml"},"name: user_info\n\nwrite_mode: merge\n\nschema:\n  primary_key: user.id\n")),(0,r.kt)("p",null,"In this example, when you ingest enrichment data, for a given user ID, a row will either be inserted if it doesn't exist or replaced with the new data if it already exists."))}d.isMDXComponent=!0}}]);