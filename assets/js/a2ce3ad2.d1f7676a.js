"use strict";(self.webpackChunk_matano_website=self.webpackChunk_matano_website||[]).push([[5],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>m});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),p=c(n),m=i,f=p["".concat(s,".").concat(m)]||p[m]||u[m]||r;return n?a.createElement(f,o(o({ref:t},d),{},{components:n})):a.createElement(f,o({ref:t},d))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=p;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:i,o[1]=l;for(var c=2;c<r;c++)o[c]=n[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},52991:(e,t,n)=>{n.d(t,{Z:()=>k});var a=n(67294),i=n(86010),r=n(53438),o=n(39960),l=n(13919),s=n(95999);const c="cardContainer_fWXF",d="cardTitle_rnsV",u="cardDescription_PWke";function p(e){let{href:t,children:n}=e;return a.createElement(o.Z,{href:t,className:(0,i.Z)("card padding--lg",c)},n)}function m(e){let{href:t,icon:n,title:r,description:o}=e;return a.createElement(p,{href:t},a.createElement("h2",{className:(0,i.Z)("text--truncate",d),title:r},n," ",r),o&&a.createElement("p",{className:(0,i.Z)("text--truncate",u),title:o},o))}function f(e){let{item:t}=e;const n=(0,r.Wl)(t);return n?a.createElement(m,{href:n,icon:"\ud83d\uddc3\ufe0f",title:t.label,description:(0,s.I)({message:"{count} items",id:"theme.docs.DocCard.categoryDescription",description:"The default description for a category card in the generated index about how many items this category includes"},{count:t.items.length})}):null}function g(e){var t;let{item:n}=e;const i=(0,l.Z)(n.href)?"\ud83d\udcc4\ufe0f":"\ud83d\udd17",o=(0,r.xz)(null!=(t=n.docId)?t:void 0);return a.createElement(m,{href:n.href,icon:i,title:n.label,description:null==o?void 0:o.description})}function y(e){let{item:t}=e;switch(t.type){case"link":return a.createElement(g,{item:t});case"category":return a.createElement(f,{item:t});default:throw new Error("unknown item type "+JSON.stringify(t))}}function h(e){let{className:t}=e;const n=(0,r.jA)();return a.createElement(k,{items:n.items,className:t})}function k(e){const{items:t,className:n}=e;if(!t)return a.createElement(h,e);const o=(0,r.MN)(t);return a.createElement("section",{className:(0,i.Z)("row",n)},o.map(((e,t)=>a.createElement("article",{key:t,className:"col col--6 margin-bottom--lg"},a.createElement(y,{item:e})))))}},59548:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>p,frontMatter:()=>o,metadata:()=>s,toc:()=>d});var a=n(87462),i=(n(67294),n(3905)),r=n(52991);const o={title:"Alert destinations"},l=void 0,s={unversionedId:"integrations/destinations/index",id:"integrations/destinations/index",title:"Alert destinations",description:"Matano integrates with external systems to deliver alerts. A detection can be configured to route alerts to one or multiple destinations based on a static configuration or dynamically based on the content of the triggering event.",source:"@site/docs/integrations/destinations/index.mdx",sourceDirName:"integrations/destinations",slug:"/integrations/destinations/",permalink:"/docs/integrations/destinations/",draft:!1,editUrl:"https://github.com/matanolabs/matano-website/tree/main/website/docs/integrations/destinations/index.mdx",tags:[],version:"current",frontMatter:{title:"Alert destinations"},sidebar:"tutorialSidebar",previous:{title:"Working with enrichment tables",permalink:"/docs/enrichment/working-with-enrichment-tables"},next:{title:"Slack",permalink:"/docs/integrations/destinations/slack"}},c={},d=[{value:"Onboarding alert destinations",id:"onboarding-alert-destinations",level:3},{value:"Default routing order",id:"default-routing-order",level:3},{value:"Supported destinations",id:"supported-destinations",level:2}],u={toc:d};function p(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Matano integrates with external systems to deliver alerts. A detection can be configured to route alerts to one or multiple destinations based on a static configuration or dynamically based on the content of the triggering event."),(0,i.kt)("p",null,"For example, you may choose to send all low severity alerts to Slack while all high severity alerts should both create a ticket in PagerDuty as well as alert in Slack."),(0,i.kt)("p",null,"Each Matano alert destinations is created and managed using a configuration file under the ",(0,i.kt)("inlineCode",{parentName:"p"},"integrations/destinations/")," folder in your Matano directory."),(0,i.kt)("h3",{id:"onboarding-alert-destinations"},"Onboarding alert destinations"),(0,i.kt)("p",null,"Each alert destination is given a unique name (e.g my_slack_team) and is created by adding a configuration file under the ",(0,i.kt)("inlineCode",{parentName:"p"},"integrations/destinations/")," subfolder in your Matano directory."),(0,i.kt)("p",null,"The alert destinations subfolder in has the following structure:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"my-matano-directory\n\u251c\u2500\u2500 integrations\n\u2502   \u2514\u2500\u2500 destinations\n\u2502       \u251c\u2500\u2500 my_slack_team.yml\n\u2502       \u251c\u2500\u2500 other_slack_team.yml\n\u2502       \u251c\u2500\u2500 jira_main.yml\n\u2502       \u2514\u2500\u2500 pagerduty_main.yml\n")),(0,i.kt)("p",null,"For details on what to include in a configuration file to setup and onboard a specific destination (e.g. a Slack channel), see ",(0,i.kt)("a",{parentName:"p",href:"#supported-destinations"},"Supported destinations")," and follow the corresponding directions for your destination type."),(0,i.kt)("h3",{id:"default-routing-order"},"Default routing order"),(0,i.kt)("p",null,"The destination list for an alert will be resolved according to following order of precedence, where the first returned non-empty value will be used as the destination list: "),(0,i.kt)("p",null,"1) ",(0,i.kt)("strong",{parentName:"p"},"Dynamic destinations() list")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"The highest precedence is taken by the destination list returned by a call to the optional ",(0,i.kt)("inlineCode",{parentName:"li"},"destinations()")," function in a detection (",(0,i.kt)("inlineCode",{parentName:"li"},"detect.py"),"). For example: ")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'def destinations(r):\n    return [\n        "mgmt_slack_team"\n        if "Management" in r.deepget("event.action")\n        else "default_slack_team"\n    ]\n')),(0,i.kt)("p",null,"1) ",(0,i.kt)("strong",{parentName:"p"},"Static destinations list")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"The second precedence is taken by a statically defined destinations list in a detection configuration file (",(0,i.kt)("inlineCode",{parentName:"li"},"detection.yml"),"). For example:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yml"},"...\ntables:\n  - aws_cloudtrail\nalert:\n  severity: medium\n  threshold: 5\n  destinations:\n    - slack_my_team\n    - jira_main\n")),(0,i.kt)("p",null,"3) ",(0,i.kt)("strong",{parentName:"p"},"Dynamic severity()")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Next if a severity is returned by a call to the optional ",(0,i.kt)("inlineCode",{parentName:"li"},"severity()")," function in a detection (",(0,i.kt)("inlineCode",{parentName:"li"},"detect.py"),"), that will be used to route the alert to the destination(s) that best corresponds to the alert (e.g. low -> Slack, critical -> pagerduty). For example: ")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'def severity(r):\n    return (\n        "medium"\n        if "admin" in r.deepget("event.category")\n        else "low"\n    )\n')),(0,i.kt)("p",null,"4) ",(0,i.kt)("strong",{parentName:"p"},"Static severity")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"The second precedence is taken by a statically defined severity in a detection configuration file (",(0,i.kt)("inlineCode",{parentName:"p"},"detection.yml"),"). For example:")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Lastly, if a statically defined severity is present in the detection configuration file, that will be used to route the alert to the destination(s) that best corresponds to the alert (e.g. low -> Slack, critical -> pagerduty). For example: "))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yml"},"...\ntables:\n  - aws_cloudtrail\nalert:\n  severity: high\n")),(0,i.kt)("h2",{id:"supported-destinations"},"Supported destinations"),(0,i.kt)("p",null,"The following are currently supported Matano alert destinations. Click through to view specific documentation for each destination."),(0,i.kt)(r.Z,{mdxType:"DocCardList"}))}p.isMDXComponent=!0}}]);